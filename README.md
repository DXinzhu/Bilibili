# Bilibili Android 模拟应用

这是一个模拟Bilibili应用的Android项目，用于AI操作测试。该应用不需要联网，所有数据都是预设的静态数据。

## 项目概述

本项目采用MVP架构模式，使用Jetpack Compose构建UI，实现了Bilibili应用的核心页面和功能。

## 技术栈

- **语言**: Kotlin
- **最小SDK**: API 33 (Android 13)
- **目标SDK**: API 33
- **编译SDK**: API 36
- **架构模式**: MVP (Model-View-Presenter)
- **UI框架**: Jetpack Compose
- **依赖管理**: Gradle (Kotlin DSL)

## 主要依赖

- **AndroidX Core KTX**: Android核心库
- **Jetpack Compose**: 声明式UI框架
- **Material 3**: Material Design 3组件库
- **Gson 2.10.1**: JSON解析库
- **Coil 2.5.0**: 图片加载库
- **Material Icons Extended**: 扩展图标库
- **Accompanist Pager 0.32.0**: 轮播图组件库

## 项目结构

```
app/src/main/java/com/example/bilibili/
├── MainActivity.kt                    # 主Activity，包含底部导航
├── model/                             # 数据模型层
│   ├── User.kt                        # 用户数据模型
│   ├── Video.kt                       # 视频数据模型
│   ├── Comment.kt                     # 评论数据模型
│   ├── Danmaku.kt                     # 弹幕数据模型
│   ├── UPMaster.kt                    # UP主数据模型
│   ├── WatchHistory.kt                # 观看历史模型
│   ├── Post.kt                        # 动态数据模型
│   ├── Product.kt                     # 商品数据模型
│   └── TaskState.kt                   # 任务状态模型
├── presenter/                         # 业务逻辑层
│   ├── MePresenter.kt                 # "我的"页面业务逻辑
│   ├── RecommendPresenter.kt          # 推荐页面业务逻辑
│   ├── ActionPresenter.kt             # 动态页面业务逻辑
│   └── BuyPresenter.kt                # 会员购页面业务逻辑
├── view/                              # 视图层
│   ├── MeTab.kt                       # "我的"页面UI
│   ├── RecommendTab.kt                # 推荐页面UI
│   ├── ActionTab.kt                   # 动态页面UI
│   └── BuyTab.kt                      # 会员购页面UI
└── ui/theme/                          # 主题配置
    ├── Color.kt
    ├── Theme.kt
    └── Type.kt
```

```
app/src/main/assets/
├── data/                              # 预设数据
│   ├── user.json                      # 用户数据（小明）
│   ├── videos.json                    # 视频数据
│   ├── comments.json                  # 评论数据
│   ├── danmaku.json                   # 弹幕数据
│   ├── upmasters.json                 # UP主数据
│   ├── posts.json                     # 动态数据
│   ├── products.json                  # 商品数据
│   └── watch_history.json             # 观看历史
├── avatar/                            # 头像图片资源
│   └── *.jpg                          # 各种头像图片
├── video/                             # 视频资源
│   ├── *.mp4                          # 视频文件
│   └── *.png                          # 视频封面图片
└── buy/                               # 商品图片资源
    └── *.jpg                          # 商品图片
```

## 已实现功能

### 主界面 (MainActivity)
- 底部导航栏，包含5个标签：
  - **首页** (推荐页面 - 已完成)
  - **关注** (动态页面 - 已完成)
  - **+** (发布按钮 - 占位)
  - **会员购** (已完成)
  - **我的** (已完成)

### 推荐页面 (RecommendTab)

#### 顶部工具栏（固定不滚动）
- **第一行**:
  - 用户头像（与MeTab保持一致）
  - 搜索栏（占位文字"天后"）
  - 游戏图标
  - 消息图标（带红色数字角标99）

- **第二行导航标签**:
  - 直播
  - 推荐（当前选中，粉色高亮）
  - 热门
  - 动画
  - 影视
  - S15
  - 更多图标（省略号）

#### 中部轮播图（可滚动）
- **自动轮播**:
  - 每3秒自动切换到下一张图片
  - 支持手指左右滑动切换
  - 底部有指示器显示当前位置

- **轮播图内容**:
  1. autumn.jpg - "秋日出游指南"
  2. fruit.jpg - "动漫排名更新"
  3. cloud.jpg - "学会在自然中思考"

#### 底部视频列表（可滚动，2列网格布局）
展示4个推荐视频，2列2行布局：
1. **罗翔说刑法** (封面: video/L1.png) - UP主: up1
2. **游戏实况** (封面: video/Y3.png) - UP主: up3
3. **打铁花** (封面: video/M11.png) - UP主: up11
4. **舞龙表演** (封面: video/M12.png) - UP主: up12

每个视频卡片包含：
- 视频封面图片（从assets/video目录加载）
- 视频标题（最多显示2行）
- UP主名称
- 点击视频卡片可播放视频（TODO）

### 动态页面 (ActionTab)

#### 顶部栏（固定不滚动）
- "关注"标题（居左）
- 发布动态图标（居右，编辑图标）

#### 全部/视频切换按钮
- **全部**（默认选中，粉色高亮带下划线）
- **视频**（灰色，可切换）

#### 最常访问栏
- 标题"最常访问"（左侧）+ "更多"链接（右侧）
- 4个UP主头像横向排列：
  - up1（头像: autumn.jpg）
  - up2（头像: summer.jpg）
  - up3（头像: winter.jpg）
  - up4（头像: cloud.jpg）
- 每个头像右上角带粉色小红点（表示有新动态）
- 显示UP主名称

#### 动态列表（可滚动）
展示2条动态：

**1. 视频动态（up1发布）**
- UP主信息：头像（autumn.jpg）+ 名称（up1）+ 发布时间（29分钟前）
- 视频封面：video/L1.png（16:9比例，无播放按钮覆盖）
- 左下角显示：视频时长（01:58）+ 播放次数（1439播放）
- 视频标题：罗翔说刑法
- 互动按钮：转发（0）、评论（14）、点赞（115）

**2. 文字动态（up2发布）**
- UP主信息：头像（summer.jpg）+ 名称（up2）+ 发布时间（4小时前）
- 文字内容：恭喜评论区前四名中奖，详情请点击抽奖查看。
- 配图：avatar/bike.jpg（16:9比例，圆角）
- 互动按钮：转发（0）、评论（0）、点赞（0）

每条动态卡片包含：
- UP主头像、名称、发布时间
- 动态内容（视频/文字+图片）
- 转发、评论、点赞三个互动按钮
- 更多操作按钮（右上角三个点）

### 会员购页面 (BuyTab)

#### 顶部栏（固定不滚动）
- "会员购"标题（居左）
- 搜索栏（带搜索图标，占位文字"搜索"）

#### 商品网格列表（可滚动，2列布局）
展示4个商品，2个一排，共2排：

**商品列表**
1. **bilibili 2233娘手办模型**（图片: buy/1.jpg）
   - 价格: ¥99.9
   - 原价: ¥149.9（显示删除线）
   - 销量: 1200人购买
   - 标签: 热销

2. **bilibili会员周边抱枕**（图片: buy/2.jpg）
   - 价格: ¥59.9
   - 销量: 856人购买

3. **bilibili潮流文化衫**（图片: buy/3.jpg）
   - 价格: ¥79.9
   - 原价: ¥99.9（显示删除线）
   - 销量: 2340人购买
   - 标签: 新品

4. **bilibili周边徽章套装**（图片: buy/4.jpg）
   - 价格: ¥29.9
   - 销量: 567人购买

每个商品卡片包含：
- 商品图片（1:1比例，圆角）
- 商品名称（最多2行）
- 价格信息（粉色大字显示）
- 原价（如有折扣，显示删除线）
- 销量信息（灰色小字）
- 标签（如"热销"、"新品"，粉色背景）

### "我的"页面 (MeTab)

#### 顶部工具栏
- 互连图标
- 扫一扫图标
- 皮肤切换图标
- 夜间模式图标

#### 中部信息栏（固定不滚动）
- **用户信息区**:
  - 用户头像（圆形，带粉色边框）
  - 用户昵称：小明
  - 用户等级：LV5
  - 会员状态：正式会员
  - B币余额：0.0
  - 硬币数量：988
  - 空间入口

- **统计数据区**:
  - 动态数量：1
  - 关注数量：87
  - 粉丝数量：0

- **会员中心横幅**:
  - "成为大会员"提示
  - "会员中心"按钮

#### 底部服务列表（可滚动）
- **快捷功能区**:
  - 离线缓存
  - 历史记录
  - 我的收藏
  - 稍后再看

- **发布视频提示卡片**
- **游戏中心**:
  - 我的游戏
  - 我的预约
  - 找游戏
  - 游戏排行榜

- **我的服务**:
  - 我的课程
  - 免流量服务
  - 个性装扮
  - 我的钱包
  - 会员购
  - 我的直播
  - 漫画
  - 必火推广
  - 创作中心
  - 社区中心
  - 哔哩哔哩公益
  - 工房
  - 能量加油站

- **更多服务**:
  - 联系客服
  - 听视频
  - 未成年人守护
  - 设置

## 数据说明

### 用户数据 (user.json)
- 用户ID: user001
- 用户名: 小明
- 头像: avatar/spring.jpg
- 等级: 5
- B币: 0.0
- 硬币: 988
- 会员状态: 正式会员
- 动态/关注/粉丝: 1/87/0

### 视频数据 (videos.json)
推荐页面展示的4个视频：
- vid001: 罗翔说刑法 (UP主: up1, 封面: video/L1.png)
- vid003: 游戏实况 (UP主: up3, 封面: video/Y3.png)
- vid011: 打铁花 (UP主: up11, 封面: video/M11.png)
- vid012: 舞龙表演 (UP主: up12, 封面: video/M12.png)

所有数据都存储在 `app/src/main/assets/data/` 目录下的JSON文件中，应用启动时通过Gson解析加载。

## MVP架构说明

### Model层
负责数据的定义和管理，所有数据模型类都在 `model/` 包中。

### View层
使用Jetpack Compose构建UI，所有Composable函数都在 `view/` 包中。View层只负责UI展示，不包含业务逻辑。

### Presenter层
处理业务逻辑，连接Model和View。例如：
- `MePresenter` 负责加载用户数据、处理用户交互等
- `RecommendPresenter` 负责加载推荐视频数据、筛选指定视频等

## 开发规范

1. **遵循MVP模式**: 严格分离Model、View、Presenter三层
2. **避免单文件过长**: 将复杂组件拆分为多个小组件
3. **使用预设数据**: 所有数据都从assets/data目录加载
4. **图标选择**: 优先使用Material Icons，找不到合适的可用emoji
5. **不实现动态功能**: 所有数据都是静态的，不需要网络请求
6. **不需要数据库**: 使用JSON文件存储数据即可

## 构建与运行

### 构建项目
```bash
./gradlew build
```

### 运行Debug版本
```bash
./gradlew installDebug
```

### 清理项目
```bash
./gradlew clean
```

## 待开发功能

根据页面树定义，所有主要页面已完成：
- [x] RecommendTab - 推荐视频页面（已完成）
- [x] ActionTab - 关注动态页面（已完成）
- [x] BuyTab - 会员购页面（已完成）
- [x] MeTab - 我的页面（已完成）

## 注意事项

1. 本应用仅用于AI操作测试，不连接真实的Bilibili服务器
2. 所有交互都是本地模拟，不会产生真实的数据变化
3. 头像图片存储在 `assets/avatar/` 目录下
4. 不需要申请任何特殊权限（网络、通知等）

## 版本历史

### v1.5.0 (2025-01-19)
- ✅ 完成会员购页面 (BuyTab)
  - 实现顶部栏（"会员购"标题 + 搜索栏）
  - 实现商品网格列表（2列布局）
  - 实现商品卡片（包含图片、名称、价格、原价、销量、标签）
  - 支持折扣显示（原价删除线）
- ✅ 创建Product数据模型
- ✅ 创建BuyPresenter业务逻辑层
- ✅ 创建products.json数据文件，包含4个商品
- ✅ 添加商品图片资源到assets/buy目录

### v1.4.0 (2025-01-19)
- ✅ 完成动态页面 (ActionTab)
  - 实现顶部栏（"关注"标题 + 发布动态图标）
  - 实现全部/视频切换按钮
  - 实现最常访问栏（展示4个UP主：up1, up2, up3, up4）
  - 实现视频动态卡片（包含UP主信息、视频封面、时长、播放数、标题、互动按钮）
  - 实现文字动态卡片（包含UP主信息、文字内容、配图、互动按钮）
- ✅ 创建Post数据模型（支持VIDEO和TEXT两种类型）
- ✅ 创建ActionPresenter业务逻辑层
- ✅ 添加up1, up2, up3, up4到upmasters.json
  - up1: autumn.jpg（发布罗翔说刑法视频）
  - up2: summer.jpg（发布抽奖文字动态）
  - up3: winter.jpg
  - up4: cloud.jpg
- ✅ 创建posts.json数据文件，包含2条动态
- ✅ 移除推荐页面视频封面上的播放图标覆盖层

### v1.3.0 (2025-01-19)
- ✅ 优化推荐页面视频布局
  - 改为2列网格布局（2个视频一排，共2排）
  - 添加视频封面图片支持（使用video/L1.png、Y3.png、M11.png、M12.png）
  - 优化视频卡片UI（圆角、播放按钮覆盖层）
  - 添加封面图片点击播放功能（TODO）
- ✅ 更新Video数据模型，添加coverImage字段
- ✅ 更新videos.json，为4个推荐视频添加封面图片路径
- ✅ 修正图片文件格式为.png

### v1.2.0 (2025-01-19)
- ✅ 完成推荐页面 (RecommendTab)
  - 实现顶部工具栏（用户头像、搜索栏、游戏图标、消息图标）
  - 实现导航标签（直播、推荐、热门、动画、影视、S15、更多）
  - 实现自动轮播图（3张图片，每3秒自动切换，支持手动滑动）
  - 实现推荐视频列表（展示4个指定视频）
- ✅ 创建RecommendPresenter业务逻辑层
- ✅ 更新videos.json数据，添加指定视频信息
- ✅ 添加Accompanist Pager依赖用于轮播图

### v1.1.0 (2025-01-19)
- ✅ 优化"我的"页面布局
  - 将快捷功能区（离线缓存、历史记录、我的收藏、稍后再看）从固定中部区域移至可滚动底部列表
  - 使固定中部信息栏更加简洁紧凑
  - 改善了小屏幕设备的用户体验

### v1.0.0 (2025-01-18)
- ✅ 实现MVP架构基础框架
- ✅ 创建数据模型层 (User, Video, Comment, Danmaku, UPMaster, WatchHistory, TaskState)
- ✅ 实现MainActivity主界面和底部导航
- ✅ 完成"我的"页面 (MeTab)
  - 顶部工具栏
  - 中部用户信息栏（固定）
  - 底部服务列表（可滚动）
- ✅ 添加RecommendTab和ActionTab占位页面
- ✅ 集成Gson、Coil等必要依赖
- ✅ 配置用户预设数据 (小明)

## 许可证

本项目仅供学习和研究使用。
